# Maintainer: OmeGa <omega at mailoo dot org>

pkgname=gitlist
pkgver=0.3
pkgrel=2
pkgdesc="An elegant and modern git repository viewer."
arch=('any')
url="http://gitlist.org/"
license=('BSD')
depends=('git' 'php')
optdepends=('apache: Web server to run GitList'
            'lighttpd: Web server to run GitList'
            'nginx: Lightweight Web server to run GitList')
options=('emptydirs')
install=$pkgname.install
source=(https://s3.amazonaws.com/gitlist/$pkgname-$pkgver.tar.gz)
noextract=($pkgname-$pkgver.tar.gz)
sha1sums=('ac7e42fbb0fe8d96c712ec80b81a5c19d57b1147')

build() {
  cd "$srcdir"
  [[ -d $pkgname-extract ]] || \
    mkdir $pkgname-extract
  cd $pkgname-extract
  tar -xzf ../$pkgname-$pkgver.tar.gz
}

package() {
  cd "$srcdir"
  local dstdir="$pkgdir/usr/share/webapps"
  install -d "$dstdir"
  cp -a $pkgname-extract "$dstdir/$pkgname"
  chmod 0777 "$dstdir/$pkgname/cache"

  install -Dm644 $pkgname-extract/LICENSE.txt \
    "$pkgdir/usr/share/licenses/$pkgname/LICENSE"
}

# vim:set ts=2 sw=2 et:
